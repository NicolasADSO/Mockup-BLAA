<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editar Proceso - Entrega Final</title>
  <link rel="stylesheet" href="../assets/css/layout.css">
  <link rel="stylesheet" href="../assets/css/editar.css">
</head>
<body>
  <!-- NAVBAR -->
  <div class="navbar">
    <img src="../assets/img/logo-sin-fondo.png" alt="Logo BlaaFlow">
    <div class="search-profile">
      <input type="text" placeholder="Buscar...">
      <div class="profile">A</div>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar">
    <ul>
      <li><a href="../dashboard.html">Dashboard Admin</a></li>

      <div class="section-title"><b>Fases Especializadas ▿</b></div>
      <li><a href="../empaste/empaste.html">Encuadernación / Empaste</a></li>
      <li><a href="../catalogacion/catalogacion.html">Catalogaciones</a></li>
      <li><a href="../entrega/entrega.html" class="active">Entrega Final</a></li>
      <li><a href="../digitalizacion/digitalizacion.html">Digitalización</a></li>
      <li><a href="../calidad/calidad.html">Control de Calidad</a></li>
      <li><a href="../terminado/terminado.html">Terminado Final</a></li>
      <li><a href="../alistamiento/alistamiento.html">Alistamiento</a></li>

      <div class="section-title"><b>Seguimiento ▿</b></div>
      <li><a href="../control-procesos/procesos.html">Control de Procesos</a></li>
      <li><a href="../historial-procesos/historial.html">Historial de Procesos</a></li>


      <div class="section-title"><b>Configuración ▿</b></div>
      <li><a href="../configuracion/permisos.html">Permisos</a></li>
      <li><a href="../configuracion/fases.html">Fases del Proceso</a></li>
      <li><a href="../configuracion/roles.html">Roles y Permisos</a></li>
      <li><a href="../configuracion/usuarios.html">Usuarios</a></li>

      <div class="section-title"><b>Gestión ▿</b></div>
      <li><a href="../gestion/proveedores.html">Proveedores</a></li>
    </ul>
  </div>

  <!-- CONTENIDO -->
  <div class="content">
    <h2 class="page-title">✏️ Editar Proceso - Entrega Final</h2>

    <div class="edit-card edit-form">
      <h3 class="section-title">Información de Entrega</h3>

      <form id="form-entrega">
        <div class="field">
          <label>Responsable de Entrega:</label>
          <input type="text" name="responsable" placeholder="Nombre del responsable">
        </div>

        <div class="field">
          <label>Fecha de Entrega:</label>
          <input type="date" name="fecha_entrega">
        </div>

        <div class="field two-cols">
          <label>Observaciones:</label>
          <textarea name="observaciones" placeholder="Notas adicionales de la entrega"></textarea>
        </div>

        <div class="form-footer two-cols">
          <a href="../entrega/entrega.html" class="btn ghost">Volver al listado</a>
          <button type="submit" class="btn">Guardar Cambios</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../assets/js/flujo.js"></script>
  <script>
    document.getElementById('form-entrega').addEventListener('submit', function(e) {
      e.preventDefault();

      const id = FLUJO.readId();
      const datos = {
        responsable: this.responsable.value,
        fecha_entrega: this.fecha_entrega.value,
        observaciones: this.observaciones.value,
      };

      // Guardar datos de la fase
      FLUJO.guardarFase(id, 'entrega', datos);

      // Avanzar a la siguiente fase
      FLUJO.goDetalleSiguiente(id);
    });
  </script>
</body>
</html>
